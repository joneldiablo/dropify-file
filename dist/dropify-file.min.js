/*
 *  dropify-file - v4.1.0
 *  A jump-start for jQuery plugins development.
 *  
 *
 *  Made by JD-R2
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},i,c),this._defaults=i,this._name=h,this.init()}function f(a){return a.replace(/-([a-z])/gi,function(a,b){return b.toUpperCase()})}function g(a){switch(a){case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";default:return"text/plain"}}var h="dropifyFile",i={height:60,showRemove:!1,allowedFileExtensions:["xlsx","xls"],showErrors:!1,dropify:{tpl:{wrap:'<div class="dropify-wrapper card-box dropify-file touch-fallback"></div>',message:'<div class="dropify-message"><p>{{ default }}<span class="file-icon" /></p></div>',preview:'<div class="dropify-preview"><span class="dropify-render pull-left"></span><div class="dropify-infos pull-left"><div class="dropify-infos-inner"><p class="dropify-infos-message">{{ replace }}</p></div></div></div>'},messages:{default:"Arrastra y suelta o da clic aquí para agregar",replace:"Arrastra y suelta o da clic aquí para reemplazar",remove:"Remover",error:""},error:{fileExtension:"Formato de archivo no permitido ({{ value }} únicamente)."}},useForm:!0,formBtnText:"Leer archivo",form:{action:"#",method:"post"}};a.extend(e.prototype,{init:function(){var b=this,c=a(this.element);c.attr("data-height",this.settings.height),c.attr("data-show-remove",this.settings.showRemove),c.attr("data-allowed-file-extensions",this.settings.allowedFileExtensions.join(" ")),c.attr("accept",a.map(this.settings.allowedFileExtensions,function(a,b){return g(a)}).join(", "));var d=c.dropify(this.settings.dropify);this.settings.useForm&&(b.addSubmitButton(),b.hideSubmitButton(),c.on("change",function(){""!==a(this).val()?b.showSubmitButton():b.hideSubmitButton()}),d.on("dropify.errors",function(a,c){b.hideSubmitButton()}))},help:function(){var b=a.map(this,function(a,b){if("function"==typeof a)return b});return console.log("defaults"),console.log(i),console.log("métodos disponibles"),console.log(b),console.log("------------"),[JSON.stringify(i),JSON.stringify(b)]},getForm:function(){return this.$form},setActionForm:function(a){this.$form.attr("action",a)},setMethodForm:function(a){this.$form.attr("method",a)},setAttrForm:function(a){this.$form.attr(a)},addSubmitButton:function(){var b=a("<form>",this.settings.form),c=a("<button>",{class:"btn btn-primary pull-left submit-btn",type:"submit"}).text(this.settings.formBtnText),d=a(this.element);return d.closest(".dropify-wrapper.dropify-file").append(b.append(c)),b.append(d),this.$form=b,d},removeSubmitButton:function(){a(this.element).closest(".dropify-wrapper.dropify-file").find("form").remove()},showSubmitButton:function(){this.$form.find("button[type=submit]").css("display","")},hideSubmitButton:function(){this.$form.find("button[type=submit]").hide()}}),a.fn[h]=function(b,c){var d;if("string"!=typeof b)c=b,d=this.each(function(b,d){a.data(d,"plugin_"+h)||a.data(d,"plugin_"+h,new e(d,c))});else switch(d=this.map(function(d,g){var i,j=a.data(g,"plugin_"+h);return j||(j=new e(g,c),a.data(g,"plugin_"+h,j)),"function"==typeof j[f(b)]&&(i=j[f(b)](c)),i}).get(),d.length){case 0:d=null;break;case 1:d=d[0]}return d}}(jQuery,window,document);